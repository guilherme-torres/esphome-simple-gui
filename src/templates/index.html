<!doctype html>

<head lang="pt-br">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hello from Flask</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}">
  <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.bundle.min.js') }}"></script>
</head>

<body>
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-7 col-lg-6">
        <div class="card shadow">
          <div class="card-header bg-primary text-white py-4">
            <h3 class="mb-0 fs-4 fw-bold">Configuração do Dispositivo</h3>
          </div>
          <div class="card-body">
            <form action="{{ url_for('create_device') }}" method="post">
              <div class="mb-3">
                <label for="deviceName" class="form-label">Nome do dispositivo</label>
                <input type="text" class="form-control" id="deviceName" name="deviceName" required>
              </div>
              <div class="mb-3">
                <label for="platform" class="form-label">Plataforma</label>
                <select class="form-select" id="platform" name="platform" required>
                  <option selected value="esp8266">ESP8266</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="board" class="form-label">Placa</label>
                <select class="form-select" id="board" name="board" required>
                  <option value="agruminolemon">Lifely Agrumino Lemon v4</option>
                  <option value="d1_mini_lite">WeMos D1 mini Lite</option>
                  <option value="d1_mini">WeMos D1 R2 and mini</option>
                  <option value="d1_mini_pro">WeMos D1 mini Pro</option>
                  <option value="d1">WEMOS D1 R1</option>
                  <option value="eduinowifi">Schirmilabs Eduino WiFi</option>
                  <option value="esp01_1m">Espressif Generic ESP8266 ESP-01 1M</option>
                  <option value="esp01">Espressif Generic ESP8266 ESP-01 512k</option>
                  <option value="esp07">Espressif Generic ESP8266 ESP-07 1MB</option>
                  <option value="esp07s">Espressif Generic ESP8266 ESP-07S</option>
                  <option value="esp12e">Espressif ESP8266 ESP-12E</option>
                  <option value="esp210">SweetPea ESP-210</option>
                  <option value="esp8285">Generic ESP8285 Module</option>
                  <option value="espduino">ESPDuino (ESP-13 Module)</option>
                  <option value="espectro">ESPectro Core</option>
                  <option value="espino">ESPino</option>
                  <option value="espinotee">ThaiEasyElec ESPino</option>
                  <option value="espmxdevkit">ESP-Mx DevKit (ESP8285)</option>
                  <option value="espresso_lite_v1">ESPresso Lite 1.0</option>
                  <option value="espresso_lite_v2">ESPresso Lite 2.0</option>
                  <option value="esp_wroom_02">ESP-WROOM-02</option>
                  <option value="gen4iod">4D Systems gen4 IoD Range</option>
                  <option value="heltec_wifi_kit_8">Heltec Wifi kit 8</option>
                  <option value="huzzah">Adafruit HUZZAH ESP8266</option>
                  <option value="inventone">Invent One</option>
                  <option value="modwifi">Olimex MOD-WIFI-ESP8266(-DEV)</option>
                  <option value="nodemcu">NodeMCU 0.9 (ESP-12 Module)</option>
                  <option value="nodemcuv2" selected>NodeMCU 1.0 (ESP-12E Module)</option>
                  <option value="oak">DigiStump Oak</option>
                  <option value="phoenix_v1">Phoenix 1.0</option>
                  <option value="phoenix_v2">Phoenix 2.0</option>
                  <option value="sonoff_basic">Sonoff Basic</option>
                  <option value="sonoff_s20">Sonoff S20</option>
                  <option value="sonoff_sv">Sonoff SV</option>
                  <option value="sonoff_th">Sonoff TH</option>
                  <option value="sparkfunBlynk">SparkFun Blynk Board</option>
                  <option value="thingdev">SparkFun ESP8266 Thing Dev</option>
                  <option value="thing">SparkFun ESP8266 Thing</option>
                  <option value="wifiduino">WiFiduino</option>
                  <option value="wifinfo">WifInfo</option>
                  <option value="wifi_slot">WiFi Slot</option>
                  <option value="wio_link">Wio Link</option>
                  <option value="wio_node">Wio Node</option>
                  <option value="xinabox_cw01">XinaBox CW01</option>
                </select>
              </div>
              <hr>
              <h5 class="mb-3">Rede Wi-Fi</h5>
              <div class="mb-3">
                <label for="wifiSsid" class="form-label">Nome da rede</label>
                <input type="text" class="form-control" id="wifiSsid" name="wifiSsid" required>
              </div>
              <div class="mb-3">
                <label for="wifiPassword" class="form-label">Senha</label>
                <div class="input-group">
                  <input type="password" class="form-control" id="wifiPassword" name="wifiPassword" required>
                  <button class="btn btn-outline-secondary" type="button" id="toggleWifiPassword" tabindex="-1"
                    onclick="toggleWifiPasswordVisibility()">
                    <img id="wifiPasswordIcon" src="{{ url_for('static', filename='icons/eye.svg') }}" alt="mostrar senha">
                  </button>
                </div>
              </div>
              <hr>
              <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" id="otaProtected" onchange="toggleOtaPassword()">
                <label class="form-check-label" for="otaProtected">Proteger atualizações OTA com senha</label>
              </div>
              <div class="mb-3" id="otaPasswordGroup" style="display: none;">
                <label for="otaPassword" class="form-label">Senha OTA</label>
                <input type="password" class="form-control" id="otaPassword" name="otaPassword">
              </div>
              <button type="submit" class="btn btn-primary w-100">Salvar</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function toggleOtaPassword() {
      const group = document.getElementById('otaPasswordGroup');
      const checkbox = document.getElementById('otaProtected');
      group.style.display = checkbox.checked ? 'block' : 'none';
    }

    function toggleWifiPasswordVisibility() {
      const input = document.getElementById('wifiPassword');
      const btn = document.getElementById('toggleWifiPassword');
      const wifiPasswordIcon = document.getElementById('wifiPasswordIcon')

      if (input.type === 'password') {
        input.type = 'text';
        wifiPasswordIcon.src = "{{ url_for('static', filename='icons/eye-slash.svg') }}"
        wifiPasswordIcon.alt = "ocultar senha"
      } else {
        input.type = 'password';
        wifiPasswordIcon.src = "{{ url_for('static', filename='icons/eye.svg') }}"
        wifiPasswordIcon.alt = "mostrar senha"
      }
    }
  </script>
</body>